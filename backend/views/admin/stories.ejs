<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Stories</title>
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
	<header class="bg-white border-b">
		<div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
			<h1 class="text-xl font-semibold">Stories</h1>
			<a class="text-sm text-gray-600" href="/admin">Back</a>
		</div>
	</header>
	<main class="max-w-5xl mx-auto px-4 py-6">
		<div class="bg-white border rounded">
			<table class="w-full text-sm">
				<thead>
					<tr class="border-b bg-gray-50">
						<th class="text-left p-2">Title</th>
						<th class="text-left p-2">Subreddit</th>
						<th class="text-left p-2">Score</th>
						<th class="text-left p-2">Comments</th>
						<th class="text-left p-2">Created</th>
						<th class="text-left p-2">Actions</th>
					</tr>
				</thead>
				<tbody>
					<% if (stories && stories.length) { %>
						<% stories.forEach(s => { %>
							<tr class="border-b align-top">
								<td class="p-2 max-w-[420px]">
									<a class="text-blue-700 hover:underline" href="/story/<%= s.slug %>" target="_blank"><%= s.title %></a>
								</td>
								<td class="p-2">r/<%= s.subreddit %></td>
								<td class="p-2"><%= s.score %></td>
								<td class="p-2"><%= s.num_comments %></td>
								<td class="p-2 whitespace-nowrap"><%= new Date(s.created_at).toLocaleString() %></td>
								<td class="p-2">
									<form method="post" action="/admin/stories/<%= s.id %>/delete" onsubmit="return confirm('Delete this story?')">
										<button class="text-red-600">Delete</button>
									</form>
								</td>
							</tr>
						<% }) %>
					<% } else { %>
						<tr>
							<td colspan="6" class="p-4 text-gray-600">No stories found.</td>
						</tr>
					<% } %>
				</tbody>
			</table>
		</div>
		<div class="mt-4 flex gap-2">
			<a class="px-3 py-1 border rounded bg-white" href="/admin/stories?page=<%= page - 1 %>" onclick="if(<%= page %> <= 1){event.preventDefault();}">Prev</a>
			<a class="px-3 py-1 border rounded bg-white" href="/admin/stories?page=<%= page + 1 %>">Next</a>
		</div>
	</main>
</body>
</html>


