<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Manage Subreddits</title>
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
	<header class="bg-white border-b">
		<div class="max-w-3xl mx-auto px-4 py-4 flex justify-between items-center">
			<h1 class="text-xl font-semibold">Subreddits</h1>
			<a class="text-sm text-gray-600" href="/admin">Back</a>
		</div>
	</header>
	<main class="max-w-3xl mx-auto px-4 py-6 space-y-6">
		<section class="bg-white border rounded p-4">
			<h2 class="font-semibold mb-2">Add subreddit</h2>
			<form method="post" action="/admin/subreddits/add" class="flex gap-2">
				<input name="name" placeholder="e.g. AskReddit" class="flex-1 border rounded px-3 py-2" required />
				<button class="bg-gray-900 text-white rounded px-4">Add</button>
			</form>
		</section>

		<section class="bg-white border rounded p-4">
			<h2 class="font-semibold mb-2">Subreddits</h2>
			<table class="w-full text-sm">
				<thead>
					<tr class="border-b bg-gray-50">
						<th class="text-left p-2">Name</th>
						<th class="text-left p-2">Enabled</th>
						<th class="text-left p-2">Actions</th>
					</tr>
				</thead>
				<tbody>
					<% if (subs && subs.length) { %>
						<% subs.forEach(s => { %>
							<tr class="border-b">
								<td class="p-2">r/<%= s.name %></td>
								<td class="p-2"><span class="inline-block px-2 py-0.5 rounded text-white <%= s.enabled ? 'bg-green-600' : 'bg-gray-500' %>"><%= s.enabled ? 'Yes' : 'No' %></span></td>
								<td class="p-2 flex gap-3">
									<form method="post" action="/admin/subreddits/<%= s.name %>/toggle">
										<button class="text-blue-700">Toggle</button>
									</form>
									<form method="post" action="/admin/subreddits/<%= s.name %>/delete" onsubmit="return confirm('Delete r/<%= s.name %>?')">
										<button class="text-red-600">Delete</button>
									</form>
								</td>
							</tr>
						<% }) %>
					<% } else { %>
						<tr>
							<td colspan="3" class="p-4 text-gray-600">No subreddits configured.</td>
						</tr>
					<% } %>
				</tbody>
			</table>
		</section>
	</main>
</body>
</html>


